drop database DR_DB;
COMMIT;

CREATE DATABASE dr_db;

USE DR_DB;

CREATE TABLE TBSETOR (
    CDSETOR INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
    NOME VARCHAR(45)
);

CREATE TABLE TBUSUARIO (
    CDUSUARIO INTEGER PRIMARY KEY NOT NULL,
    LOGIN VARCHAR(45),
    SENHA VARCHAR(45),
    NOME VARCHAR(45),
    CDPERMISSAO INTEGER NOT NULL	
);


CREATE TABLE TBOM (
    IDOM INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,--ID INTERNO DE CONTROLE DO SISTEMA
    CDOM INTEGER,                                    --CÓDIGO DA OM VINDO DO SAP
    SOLIC VARCHAR(45) NOT NULL,                      --NOME DA PESSOA QUE SOLICITOU(ABRIU) A OM NO SAP
    TPOM INTEGER NOT NULL,                           --TIPO DA OM(CORRETIVA OU PREVENTIVA)
    DSOM VARCHAR(200) NOT NULL,                      --DESCRIÇÃO DA OM
    DTGERACAO DATETIME,                              --DATA DE GERAÇÃO DA OM VINDA DO SAP
    DTBAIXA_MANUT DATETIME,                          --GRAVA O CAMPO QUANDO ACABA A MANUTENÇÃO POR PARTE DO MANUTENTOR
    DTBAIXA_SETOR DATETIME,                          --GRAVA O CAMPO QUANDO ACABA A AVALIAÇÃO DO LIDER DESIGNADO DO SETOR
    DTBAIXA_ADMIN DATETIME,                          --GRAVA O CAMPO QUANDO O ADMIN GERAL(MARCIO) AVALIA E FECHA A OM
    OBS VARCHAR(500),                                --CAMPO QUE PODE SER GRAVA UMA OBSERVAÇÃO SEM FINALIDADES "MANUTENTORAS"
    PRIORIDADE INTEGER  NOT NULL,                    --DEFINIÇÃO DE PRIORIDADE DA OM(BAIXA, MÉDIA, ALTA)
    STATUS INTEGER NOT NULL                          --DEFINIÇÃO DE STATUS DA OM(ABERTA, EM ANDAMENTO E FECHADA)
);



INSERT INTO TBSETOR (NOME) VALUES ('GERMAN');

INSERT INTO TBUSUARIO (CDUSUARIO, LOGIN, SENHA, NOME, CDPERMISSAO) VALUES (1,'german','123','ADMIN',3);

INSERT INTO TBOM (CDOM, SOLIC, TPOM, DSOM, DTGERACAO, OBS, PRIORIDADE) VALUES (1, 'DIEGO', 1, 'MAQUINA PARADA', '2019.05.14, 20:00:00', 'TESTE', 1);
INSERT INTO TBOM (CDOM, SOLIC, TPOM, DSOM, DTGERACAO, OBS, PRIORIDADE) VALUES (2, 'GIAN', 2, 'COMPUTADOR', '2019.05.14, 21:00:00', 'TESTE2', 2);
INSERT INTO TBOM (CDOM, SOLIC, TPOM, DSOM, DTGERACAO, OBS, PRIORIDADE) VALUES (3, 'PLACIDO', 2, 'MÁQUINA DA PRODUÇÃO', '2019.05.14, 19:00:00', 'TESTE3', 3);
INSERT INTO TBOM (CDOM, SOLIC, TPOM, DSOM, DTGERACAO, OBS, PRIORIDADE) VALUES (4, 'GABRIELA', 1, 'MAQUINA PARADA', '2019.05.14, 18:30:00', 'TESTE4', 2);
INSERT INTO TBOM (CDOM, SOLIC, TPOM, DSOM, DTGERACAO, OBS, PRIORIDADE) VALUES (5, 'RAFAEL', 1, 'PROBLEMA NA MAQUINA DA PRODUÇÃO', '2019.05.14, 20:00:00', 'TESTE5', 1);


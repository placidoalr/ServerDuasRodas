drop database DR_DB;
COMMIT;

CREATE DATABASE dr_db;

USE DR_DB;

CREATE TABLE TBSETOR (
    CDSETOR INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
    NOME VARCHAR(45)
);

CREATE TABLE TBUSUARIO (
    CDUSUARIO INTEGER PRIMARY KEY NOT NULL,
    LOGIN VARCHAR(45),
    SENHA VARCHAR(45),
    NOME VARCHAR(45),
    CDPERMISSAO INTEGER NOT NULL	
);


CREATE TABLE TBOM (
    IDOM INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,
    CDOM INTEGER,                                   
    SOLIC VARCHAR(45) NOT NULL,                      
    TPOM INTEGER NOT NULL,                           
    DSOM VARCHAR(200) NOT NULL,                      
    DTGERACAO DATETIME,                              
    DTBAIXA_MANUT DATETIME,                          
    DTBAIXA_SETOR DATETIME,                          
    DTBAIXA_ADMIN DATETIME,                          
    OBS VARCHAR(500),                               
    PRIORIDADE INTEGER  NOT NULL,                    
    ESTADO INTEGER NOT NULL 
);                         


INSERT INTO TBSETOR (NOME) VALUES ('GERMAN');


INSERT INTO TBUSUARIO (CDUSUARIO, LOGIN, SENHA, NOME, CDPERMISSAO) VALUES (1,'german','123','ADMIN',3);

INSERT INTO TBOM (CDOM, SOLIC, TPOM, DSOM, DTGERACAO, OBS, PRIORIDADE, ESTADO) VALUES (1, 'DIEGO', 1, 'MAQUINA PARADA', '2019.05.14, 20:00:00', 'TESTE', 1, 1);
INSERT INTO TBOM (CDOM, SOLIC, TPOM, DSOM, DTGERACAO, OBS, PRIORIDADE, ESTADO) VALUES (2, 'GIAN', 2, 'COMPUTADOR', '2019.05.14, 21:00:00', 'TESTE2', 2, 2);
INSERT INTO TBOM (CDOM, SOLIC, TPOM, DSOM, DTGERACAO, OBS, PRIORIDADE, ESTADO) VALUES (3, 'PLACIDO', 2, 'MÁQUINA DA PRODUÇÃO', '2019.05.14, 19:00:00', 'TESTE3', 3, 3);
INSERT INTO TBOM (CDOM, SOLIC, TPOM, DSOM, DTGERACAO, OBS, PRIORIDADE, ESTADO) VALUES (4, 'GABRIELA', 1, 'MAQUINA PARADA', '2019.05.14, 18:30:00', 'TESTE4', 2, 4);
INSERT INTO TBOM (CDOM, SOLIC, TPOM, DSOM, DTGERACAO, OBS, PRIORIDADE, ESTADO) VALUES (5, 'RAFAEL', 1, 'PROBLEMA NA MAQUINA DA PRODUÇÃO', '2019.05.14, 20:00:00', 'TESTE5', 1, 2);

